{
  "name": "Mentor with TG",
  "nodes": [
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "GigaChat/GigaChat-2-Max",
          "mode": "list",
          "cachedResultName": "GigaChat/GigaChat-2-Max"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        320,
        560
      ],
      "id": "8632a7c5-fe03-44ca-9338-7bb875a8d645",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "f1lRi0eyJEK7k0XY",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ebdac2eb-42bc-44b6-a325-5194a42165eb",
              "leftValue": "={{ $json.isTavilyCall }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        912,
        400
      ],
      "id": "eec4ef83-358f-472a-b9e4-a0ef06d78d9a",
      "name": "If"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "GigaChat/GigaChat-2-Max",
          "mode": "list",
          "cachedResultName": "GigaChat/GigaChat-2-Max"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1376,
        528
      ],
      "id": "58674981-4f9f-4dc2-9a54-ce9cb51e696f",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "f1lRi0eyJEK7k0XY",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const llmResponse = $input.first().json.output;\n//regex\nconst tavilyPattern = /^tavily\\(query=\"(.+)\"\\)$/;\nconst match = llmResponse.match(tavilyPattern);\n\nif (match) {\n  const searchQuery = match[1];\n  // tavily\n  return [{\n    json: {\n      isTavilyCall: true,\n      query: searchQuery,\n      originalMessage: llmResponse\n    }\n  }];\n} else {\n  return [{\n    json: {\n      isTavilyCall: false,\n      response: llmResponse,\n      originalMessage: llmResponse\n    }\n  }];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        688,
        400
      ],
      "id": "e3866f6e-41dc-45f2-82cc-77b58882a0ed",
      "name": "parser"
    },
    {
      "parameters": {
        "jsCode": "const staticData = $getWorkflowStaticData('global');\n\n// 1. –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram\n// –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ (–µ—Å–ª–∏ –≤–¥—Ä—É–≥ –ø—Ä–∏–¥–µ—Ç –Ω–µ —Ç–µ–∫—Å—Ç, –∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∏–ª–∏ —Ñ–∞–π–ª)\nconst message = $('Telegram Trigger').item.json.message;\nconst userInput = message && message.text ? message.text : \"\";\nconst cleanInput = userInput.toLowerCase().trim();\n\n// 2. –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è —Å–±—Ä–æ—Å–∞\nconst resetCommands = ['/start', 'reset', '—Å–±—Ä–æ—Å', '—Å—Ç–∞—Ä—Ç', 'restart'];\n\n// 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π —Å–±—Ä–æ—Å–∞\nif (resetCommands.includes(cleanInput)) {\n  \n  // --- –û–ß–ò–°–¢–ö–ê STATIC DATA ---\n  // –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–±—É—á–µ–Ω–∏–µ–º\n  delete staticData.learningPlan;\n  delete staticData.mode;\n  delete staticData.currentModuleIndex;\n  delete staticData.currentConceptIndex;\n  delete staticData.completedTopics;\n  // ---------------------------\n\n  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–≤–∏–º —Ä–µ–∂–∏–º interview\n  staticData.mode = 'interview'; \n  \n  return [{\n    json: {\n      mode: 'interview', // –í–∞–∂–Ω–æ: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∂–∏–º interview\n      message: '–ü—Ä–∏–≤–µ—Ç! –Ø —Å–±—Ä–æ—Å–∏–ª –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å. –ß–µ–º—É —Ç—ã —Ö–æ—á–µ—à—å –Ω–∞—É—á–∏—Ç—å—Å—è?', // –°–æ–æ–±—â–µ–Ω–∏–µ-–æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é\n      isCommand: true // –§–ª–∞–≥, —á—Ç–æ —ç—Ç–æ –±—ã–ª–∞ –∫–æ–º–∞–Ω–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)\n    }\n  }];\n}\n\n// 4. –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ —Å–±—Ä–æ—Å, —Ä–∞–±–æ—Ç–∞–µ–º –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ\nlet currentMode = staticData.mode;\n\n// –ï—Å–ª–∏ —Ä–µ–∂–∏–º–∞ –µ—â–µ –Ω–µ—Ç (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã), —Å—Ç–∞–≤–∏–º interview\nif (!currentMode) {\n  currentMode = 'interview';\n}\n\nreturn [{\n  json: {\n    mode: currentMode,\n    message: userInput,\n    isCommand: false\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -464,
        256
      ],
      "id": "b7f86d01-fc82-4760-899e-91bb07f69bc6",
      "name": "get status"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.tavily.com/search",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Authorization",
              "value": "Bearer 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"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n   \"query\": \"={{ $json.query }}\",\n   \"search_depth\": \"basic\",\n   \"include_answer\": true\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1136,
        304
      ],
      "id": "079f8644-0e62-4024-a834-60805c57a528",
      "name": "Tavily"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=–ò—Å—Ö–æ–¥–Ω—ã–π –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:\n\n{{ $('Telegram Trigger').item.json.message.text }}\n\n–û—Ç–≤–µ—Ç Tavily (JSON):\n\n{{ JSON.stringify($json.results, null, 2) }}\n\n–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É.\n",
        "options": {
          "systemMessage": "=–¢—ã –ø–æ–ª—É—á–∞–µ—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–µ–±-–ø–æ–∏—Å–∫–∞ Tavily –≤ JSON.\n\n–ò—Å–ø–æ–ª—å–∑—É–π –ø–æ–ª–µ answer –∏ results, —á—Ç–æ–±—ã –¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫—Ä–∞—Ç–∫–∏–π, –ø–æ–Ω—è—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –µ–≥–æ –∏—Å—Ö–æ–¥–Ω—ã–π –≤–æ–ø—Ä–æ—Å.\n\n–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–ø–∏—Ä–∞–π—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ Tavily, –Ω–µ –ø—Ä–∏–¥—É–º—ã–≤–∞–π —Ñ–∞–∫—Ç—ã."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1360,
        304
      ],
      "id": "94dc591e-b9e8-46c4-b32c-72816b8102b7",
      "name": "ai+tavily"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Telegram Trigger').item.json.message.text }}",
        "options": {
          "systemMessage": "–¢—ã ‚Äî –æ–ø—ã—Ç–Ω—ã–π –º–µ—Ç–æ–¥–∏—Å—Ç –∏ —Å–æ—Å—Ç–∞–≤–∏—Ç–µ–ª—å —É—á–µ–±–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –≤—ã—è—Å–Ω–∏—Ç—å –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –Ω–µ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è.\n\n–¢–í–û–ô –ê–õ–ì–û–†–ò–¢–ú –†–ê–ë–û–¢–´:\n\n–®–ê–ì 1. –°–ë–û–† –ò–ù–§–û–†–ú–ê–¶–ò–ò\n–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∑–≤–∞–ª —Ç–µ–º—É —Å–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"—Ö–æ—á—É –≤—ã—É—á–∏—Ç—å Python\" –∏–ª–∏ \"—Å—Ç–∞—Ç—å –¥–∏–∑–∞–π–Ω–µ—Ä–æ–º\"), —Ç—ã –ù–ï —Å–æ—Å—Ç–∞–≤–ª—è–µ—à—å –ø–ª–∞–Ω —Å—Ä–∞–∑—É.\n–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∑–∞–¥–∞–π 1-2 —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–∞ (–ø–æ –æ–¥–Ω–æ–º—É –∑–∞ —Ä–∞–∑), —á—Ç–æ–±—ã –≤—ã—è—Å–Ω–∏—Ç—å:\n- –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∑–Ω–∞–Ω–∏–π (–Ω–æ–≤–∏—á–æ–∫, –µ—Å—Ç—å –æ–ø—ã—Ç?).\n- –¶–µ–ª—å –æ–±—É—á–µ–Ω–∏—è (–¥–ª—è —Ä–∞–±–æ—Ç—ã, –¥–ª—è —Å–µ–±—è, –¥–ª—è —ç–∫–∑–∞–º–µ–Ω–∞?).\n- –î–æ—Å—Ç—É–ø–Ω–æ–µ –≤—Ä–µ–º—è.\n\n–®–ê–ì 2. –ì–ï–ù–ï–†–ê–¶–ò–Ø –ü–õ–ê–ù–ê (–¢–û–õ–¨–ö–û JSON)\n–ö–æ–≥–¥–∞ —Ç—ã –ø–æ–Ω—è–ª –∑–∞–¥–∞—á—É –∏ –≥–æ—Ç–æ–≤ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–ª–∞–Ω, —Ç–≤–æ–π –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –°–¢–†–û–ì–û –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.\n–ù–∏–∫–∞–∫–æ–≥–æ –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (\"–í–æ—Ç –≤–∞—à –ø–ª–∞–Ω...\"), –Ω–∏–∫–∞–∫–∏—Ö –ø–æ—è—Å–Ω–µ–Ω–∏–π –ø–æ—Å–ª–µ. –¢–æ–ª—å–∫–æ –≥–æ–ª—ã–π JSON –∫–æ–¥.\n\n–§–æ—Ä–º–∞—Ç JSON –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∞–∫–∏–º (–º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤):\n[\n  {\n    \"theme\": \"–ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è 1\",\n    \"concepts\": [\"–ü–æ–Ω—è—Ç–∏–µ 1\", \"–ü–æ–Ω—è—Ç–∏–µ 2\", \"–ü–æ–Ω—è—Ç–∏–µ 3\"]\n  },\n  {\n    \"theme\": \"–ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è 2\",\n    \"concepts\": [\"–ü–æ–Ω—è—Ç–∏–µ 1\", \"–ü–æ–Ω—è—Ç–∏–µ 2\"]\n  }\n]\n\n–í–ê–ñ–ù–û:\n- –ï—Å–ª–∏ —Ç—ã –ø—Ä–æ—Å—Ç–æ –æ–±—â–∞–µ—à—å—Å—è –∏ –∑–∞–¥–∞–µ—à—å –≤–æ–ø—Ä–æ—Å—ã ‚Äî –ø–∏—à–∏ –æ–±—ã—á–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º.\n- –ï—Å–ª–∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—à—å –ø–ª–∞–Ω ‚Äî –ø–∏—à–∏ –¢–û–õ–¨–ö–û JSON."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -16,
        0
      ],
      "id": "d3e18311-5a80-495c-ae0a-bfe800be3eca",
      "name": "Mentor"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "GigaChat/GigaChat-2-Max",
          "mode": "list",
          "cachedResultName": "GigaChat/GigaChat-2-Max"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -16,
        224
      ],
      "id": "b286f4e4-9fc2-4ace-8fff-e36ddc411dc2",
      "name": "OpenAI Chat Model2",
      "credentials": {
        "openAiApi": {
          "id": "f1lRi0eyJEK7k0XY",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.mode }}",
                    "rightValue": "interview",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "2028c273-5ba6-4fad-9d2f-95c52712440c"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2acbd494-e2f1-4269-b35b-59e2db011368",
                    "leftValue": "={{ $json.mode }}",
                    "rightValue": "learning",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -240,
        256
      ],
      "id": "86a75a58-e627-41a0-abc4-de5e8d2b9274",
      "name": "Switch"
    },
    {
      "parameters": {
        "jsCode": "const aiResponse = $input.item.json.output;\nconst staticData = $getWorkflowStaticData('global');\n\nlet parsedPlan = null;\nlet responseType = 'question';\n\n// –û—á–∏—â–∞–µ–º —Ç–µ–∫—Å—Ç –æ—Ç markdown –∏ –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤\nconst cleanText = aiResponse.replace(/``````\\n?/g, '').trim();\n\n// –ò—â–µ–º JSON –º–∞—Å—Å–∏–≤ –≤ –æ—Ç–≤–µ—Ç–µ\nconst jsonMatch = cleanText.match(/\\[[\\s\\S]*\\]/);\n\ntry {\n  if (jsonMatch) {\n    parsedPlan = JSON.parse(jsonMatch[0]);\n    responseType = 'plan_created';\n  } else {\n    // –ü–æ–ø—ã—Ç–∫–∞ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤–µ—Å—å —Ç–µ–∫—Å—Ç\n    parsedPlan = JSON.parse(cleanText);\n    responseType = 'plan_created';\n  }\n} catch (error) {\n  responseType = 'question';\n}\n\nif (responseType === 'plan_created') {\n  staticData.learningPlan = parsedPlan;\n  staticData.mode = 'learning'; \n  staticData.currentModuleIndex = 0;\n  staticData.currentConceptIndex = 0;\n  \n  // –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–ª–∞–Ω–æ–º\n  let planText = \"‚úÖ –ü–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω!\\n\\n\";\n  parsedPlan.forEach((module, idx) => {\n    planText += `üìö –ú–æ–¥—É–ª—å ${idx + 1}: ${module.theme}\\n`;\n    module.concepts.forEach(c => planText += `   ‚Ä¢ ${c}\\n`);\n    planText += \"\\n\";\n  });\n  planText += \"–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ? –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ '–¥–∞–ª–µ–µ' –∏–ª–∏ '–Ω–∞—á–Ω–µ–º'\";\n  \n  return [{\n    json: {\n      type: responseType,\n      text: planText,\n      plan: parsedPlan\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    type: responseType,\n    text: aiResponse,\n    plan: null\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        400,
        112
      ],
      "id": "78a14e65-d78b-4269-bc2c-29850cf1f751",
      "name": "change status"
    },
    {
      "parameters": {
        "jsCode": "const staticData = $getWorkflowStaticData('global');\n\n// 1. –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –ø–ª–∞–Ω–∞ (–∫–∞–∫ –±—ã–ª–æ —Ä–∞–Ω—å—à–µ)\nif (!staticData.learningPlan) {\n  // ... –ª–æ–≥–∏–∫–∞ —Å–±—Ä–æ—Å–∞ ...\n  return [{ json: { message: \"–ü–ª–∞–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω...\", finished: true } }];\n}\n\n// 2. –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é —Ç–µ–º—É\nconst plan = staticData.learningPlan;\nlet mIndex = staticData.currentModuleIndex || 0;\nlet cIndex = staticData.currentConceptIndex || 0;\n\nif (mIndex >= plan.length) {\n    // ... –ª–æ–≥–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è ...\n    return [{ json: { message: \"–ö—É—Ä—Å –∑–∞–≤–µ—Ä—à–µ–Ω!\", finished: true } }];\n}\n\nconst currentModule = plan[mIndex];\nconst currentConcept = currentModule.concepts[cIndex];\n\n// 3. –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–¥–∞—á—É –¥–ª—è —Ç–≤–æ–µ–≥–æ AI-–∞–≥–µ–Ω—Ç–∞ \"learning\"\n// –ú—ã –ø—Ä–æ—Å–∏–º –µ–≥–æ –Ω–∞–π—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∏—Å–ø–æ–ª—å–∑—É—è –µ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç tavily(...)\nconst promptForAgent = `–ú–Ω–µ –Ω—É–∂–Ω–æ –∏–∑—É—á–∏—Ç—å –ø–æ–Ω—è—Ç–∏–µ \"${currentConcept}\" –∏–∑ —Ç–µ–º—ã \"${currentModule.theme}\". \n–ù–∞–π–¥–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —ç—Ç–æ–º (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞, –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏) –∏ –ø–æ–¥–≥–æ—Ç–æ–≤—å –æ–±—É—á–∞—é—â–∏–π –ø–æ—Å—Ç.`;\n\n// –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–µ–∫—Å—ã (–¥–≤–∏–≥–∞–µ–º—Å—è –¥–∞–ª—å—à–µ)\ncIndex++;\nif (cIndex >= currentModule.concepts.length) {\n    cIndex = 0;\n    mIndex++;\n}\nstaticData.currentModuleIndex = mIndex;\nstaticData.currentConceptIndex = cIndex;\n\nreturn [{\n    json: {\n        chatInput: promptForAgent,\n        topic: currentModule.theme,\n        concept: currentConcept,\n        finished: false\n    }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        48,
        400
      ],
      "id": "9ca4eaf5-6584-4659-9620-4e783d4e6550",
      "name": "check plan"
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -688,
        256
      ],
      "id": "7a6921e4-0a16-4f8a-82a6-45cd0de492ed",
      "name": "Telegram Trigger",
      "webhookId": "df5ba699-9494-47e3-b573-d0848aaa0512",
      "credentials": {
        "telegramApi": {
          "id": "RKUCs2ebPcilFkbm",
          "name": "Mentor_bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "text": "={{ $json.text }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        688,
        112
      ],
      "id": "ca523197-d375-4a1f-8289-212f2a96704f",
      "name": "mentor answer",
      "webhookId": "c6338471-f4f6-4ec6-9628-630883f691e1",
      "credentials": {
        "telegramApi": {
          "id": "RKUCs2ebPcilFkbm",
          "name": "Mentor_bot"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "–¢—ã ‚Äî –ò–ò-–∞–≥–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ n8n. –ï—Å–ª–∏ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω—É–∂–Ω—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏–ª–∏ –Ω–æ–≤–æ—Å—Ç–∏, —Ç—ã –ù–ï –æ—Ç–≤–µ—á–∞–µ—à—å —Å—Ä–∞–∑—É. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Ç—ã –ø–∏—à–µ—à—å —Å—Ç—Ä–æ–∫—É —Ä–æ–≤–Ω–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ tavily(query=\"...\"), –≥–¥–µ –≤ –∫–∞–≤—ã—á–∫–∞—Ö ‚Äî –∫—Ä–∞—Ç–∫–∏–π –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å. –ù–∏–∫–∞–∫–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ —Ç–µ–∫—Å—Ç–∞."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        336,
        400
      ],
      "id": "e8e5b98d-555b-4693-8f88-b871caeffb97",
      "name": "Laearning"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "={{ $json.output }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1712,
        304
      ],
      "id": "b46fde97-4d7a-4fec-bfad-3b8f9e9b0bd5",
      "name": "answer with tavily",
      "webhookId": "c6338471-f4f6-4ec6-9628-630883f691e1",
      "credentials": {
        "telegramApi": {
          "id": "RKUCs2ebPcilFkbm",
          "name": "Mentor_bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "={{ $json.response }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1136,
        496
      ],
      "id": "10e63398-6681-4455-80fd-512dd8af49e0",
      "name": "answer without tavily",
      "webhookId": "c6338471-f4f6-4ec6-9628-630883f691e1",
      "credentials": {
        "telegramApi": {
          "id": "RKUCs2ebPcilFkbm",
          "name": "Mentor_bot"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Telegram Trigger').item.json.message.message_id }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        128,
        224
      ],
      "id": "510ec16b-c4d2-4aca-a458-9631fd922bf5",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Telegram Trigger').item.json.message.message_id }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        464,
        544
      ],
      "id": "9914ba16-1c0c-4f9f-b6d4-681dd339bf77",
      "name": "Simple Memory1"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Telegram Trigger').item.json.message.message_id }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        1504,
        528
      ],
      "id": "74923f21-3635-4749-a1ea-d5599759938e",
      "name": "Simple Memory2"
    }
  ],
  "pinData": {},
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Laearning",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Tavily",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "answer without tavily",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "ai+tavily",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "parser": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get status": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tavily": {
      "main": [
        [
          {
            "node": "ai+tavily",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ai+tavily": {
      "main": [
        [
          {
            "node": "answer with tavily",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Mentor",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Mentor": {
      "main": [
        [
          {
            "node": "change status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Mentor",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check plan",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "change status": {
      "main": [
        [
          {
            "node": "mentor answer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check plan": {
      "main": [
        [
          {
            "node": "Laearning",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "get status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Laearning": {
      "main": [
        [
          {
            "node": "parser",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "Mentor",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory1": {
      "ai_memory": [
        [
          {
            "node": "Laearning",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory2": {
      "ai_memory": [
        [
          {
            "node": "ai+tavily",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "2194d55a-9d4d-4b10-95dc-2e5958cf2383",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "fa00bab3674301fd8e44610c89da4fc8750bc18caf65f232a475954e73363fbb"
  },
  "id": "IjjumcJX7mjLM50Z",
  "tags": []
}